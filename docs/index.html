<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GraphForge</title>
    <link rel="stylesheet" href="styles/main.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js" defer></script>
    <script src="https://unpkg.com/n3/browser/n3.min.js"></script>
    <script src="https://rdf.js.org/comunica-browser/versions/latest/engines/query-sparql/comunica-browser.js"></script>
    <link rel="icon" type="image/png" href="icons/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="icons/favicon.svg" />
    <link rel="shortcut icon" href="icons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png" />
</head>

<body>
    <header>
        <h1>GraphForge</h1>
        <div class="topnav" id="myTopnav">
            <a href="#home" class="active" onclick="setActive(this)">Home</a>
            <a href="#saved-queries" onclick="setActive(this)">Saved Queries</a>
            <a href="#settings" onclick="setActive(this)">Settings</a>
            <a href="javascript:void(0);" class="icon" onclick="menuFunction()">☰</a>
        </div>
    </header>

    <div class="container">
        <div class="main">
            <!-- Sidebar -->
            <aside class="sidebar">
                <button class="toggle-sidebar">❮</button>
                <button id="reAuthDir" class="hidden">Re-Authorize Directory</button>
                <div class="project-container">
                    <div id="project-menu" class="project-menu">
                        <ul id="directoryList"></ul>
                        <!-- Create New Project button -->
                        <button id="createNewProject" onclick="createNewProject()">+ New Project</button>
                    </div>
                </div>
            </aside>
            <div id="context-menu" class="context-menu">
                <ul>
                    <li id="renameOption">Rename</li>
                    <li id="deleteOption">Delete</li>
                    <li id="duplicateOption">Duplicate</li>
                </ul>
            </div>
            <!-- Content area with SPA sections -->
            <div class="content">
                <!-- Home section -->
                <section id="home" class="page-section">
                    <section id="initializeMessage" class="page-section hidden">
                        <h2>Initialize Website</h2>
                        <p>To get started, please create a folder on your computer where GraphForge will have read/write
                            access. This folder will allow you to store and manage your data securely.</p>
                        <button id="initializeButton">Initialize GraphForge</button>
                        <h3>Important Information:</h3>
                        <ul>
                            <li><strong>User Control:</strong> You will be prompted to select the folder you'd like to
                                grant
                                access to.
                                Your privacy is our priority; we will not see the contents of your folder.</li>
                            <li><strong>Secure Interaction:</strong> All interactions are conducted securely, ensuring
                                your
                                data remains
                                private.</li>
                        </ul>
                        <p>Once you have created the folder and selected it, click the "Initialize Website" button to
                            proceed!</p>
                    </section>
                    <section id="fileContent" class="file-content">
                        <div class="content">
                        </div>
                    </section>
                </section>

                <!-- Saved Queries section -->
                <section id="saved-queries" class="page-section hidden">
                    <button id="add-query-section" class="add-query-button">+ New Query</button>
                    <section id="query-sections-container" class="query-sections-container"></section>
                </section>

                <!-- Settings section -->
                <section id="settings" class="page-section hidden">
                    <h2>Settings</h2>
                    <p>Application settings go here.</p>
                </section>
            </div>

            <!-- Right Panel -->
            <aside class="right-panel collapsed">
                <button class="toggle-right-panel">❯</button>
                <h2>Details Panel</h2>
                <p>Selected nodes and relationships will appear here.</p>
            </aside>
        </div>
    </div>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker
                    .register('service-worker.js?v=1.0.0')
                    .then(registration => {
                        console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(error => {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
    <script src="scripts/fileSystem.js?v=1.0.0"></script>
    <script src="scripts/graphProcessor.js?v=1.0.0"></script>
    <script src="scripts/document.js?v=1.0.0"></script>
    <script src="scripts/queryManager.js?v=1.0.0"></script>
    <script src="scripts/uiManager.js?v=1.0.0"></script>
</body>

</html>